{"version":3,"file":"js/addon-entry-search-sprites.js","sources":["webpack://GUI/./src/addons/addons/search-sprites/search-bar.css","webpack://GUI/./src/addons/addons/search-sprites/reset-icon.svg","webpack://GUI/./src/addons/addons/search-sprites/search-icon.svg","webpack://GUI/./src/addons/addons/search-sprites/_runtime_entry.js","webpack://GUI/./src/addons/addons/search-sprites/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"[class*=\\\"sprite-selector_items-wrapper_\\\"] {\\r\\n  padding-bottom: 4.75rem;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-container {\\r\\n  position: absolute;\\r\\n  z-index: 21; /* above workspace scrollbar in small stage mode */\\r\\n  bottom: 0.75rem;\\r\\n  display: flex;\\r\\n  width: 2.75rem;\\r\\n  height: 2.75rem;\\r\\n  background-color: var(--looks-secondary);\\r\\n  box-shadow: 0 0 0 4px var(--looks-transparent);\\r\\n  border-radius: 1.375rem;\\r\\n  transition:\\r\\n    width 0.25s,\\r\\n    background-color 0.25s,\\r\\n    box-shadow 0.5s;\\r\\n}\\r\\n\\r\\n[dir=\\\"ltr\\\"] .sa-search-sprites-container {\\r\\n  right: 4.75rem;\\r\\n}\\r\\n\\r\\n[dir=\\\"rtl\\\"] .sa-search-sprites-container {\\r\\n  left: 4.75rem;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-container:hover,\\r\\n.sa-search-sprites-container:focus-within,\\r\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) {\\r\\n  width: max(12rem, calc(100% - 5.75rem));\\r\\n  background-color: var(--input-background);\\r\\n}\\r\\n\\r\\n.sa-search-sprites-container:focus-within {\\r\\n  box-shadow: 0 0 0 6px var(--looks-transparent);\\r\\n}\\r\\n\\r\\ninput.sa-search-sprites-box {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  box-sizing: border-box;\\r\\n  padding: 0;\\r\\n  padding-inline-start: 2.75rem; /* space for icon */\\r\\n  background-color: transparent;\\r\\n  border: 0px;\\r\\n  border-radius: 1.375rem;\\r\\n  outline: none;\\r\\n  color: var(--text-primary);\\r\\n  font-size: 0.875rem;\\r\\n  transition: padding 0.25s;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-container:hover input.sa-search-sprites-box,\\r\\n.sa-search-sprites-container:focus-within input.sa-search-sprites-box,\\r\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) input.sa-search-sprites-box {\\r\\n  padding-inline-end: 2.75rem; /* space for reset button */\\r\\n}\\r\\n\\r\\ninput.sa-search-sprites-box::placeholder {\\r\\n  color: var(--text-primary);\\r\\n  opacity: 0;\\r\\n  transition: opacity 0.25s;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-container:hover input.sa-search-sprites-box::placeholder,\\r\\n.sa-search-sprites-container:focus-within input.sa-search-sprites-box::placeholder,\\r\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) input.sa-search-sprites-box::placeholder {\\r\\n  opacity: 0.5;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-icon {\\r\\n  position: absolute;\\r\\n  width: 2.75rem;\\r\\n  height: 2.75rem;\\r\\n  padding: 0.625rem;\\r\\n  filter: brightness(0) invert(1);\\r\\n  pointer-events: none;\\r\\n}\\r\\n\\r\\n[dir=\\\"ltr\\\"] .sa-search-sprites-icon {\\r\\n  left: 0;\\r\\n}\\r\\n\\r\\n[dir=\\\"rtl\\\"] .sa-search-sprites-icon {\\r\\n  right: 0;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-container:hover .sa-search-sprites-icon,\\r\\n.sa-search-sprites-container:focus-within .sa-search-sprites-icon,\\r\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) .sa-search-sprites-icon {\\r\\n  filter: none;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-reset {\\r\\n  display: none;\\r\\n  margin: 0;\\r\\n  width: 2.75rem;\\r\\n  height: 2.75rem;\\r\\n  padding: 0;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  background: none;\\r\\n  border: none;\\r\\n  border-radius: 50%;\\r\\n  outline: none;\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n[dir=\\\"ltr\\\"] .sa-search-sprites-reset {\\r\\n  right: 0;\\r\\n}\\r\\n\\r\\n[dir=\\\"rtl\\\"] .sa-search-sprites-reset {\\r\\n  left: 0;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-box:not(:placeholder-shown) ~ .sa-search-sprites-reset {\\r\\n  display: flex;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-reset img {\\r\\n  width: 0.5rem;\\r\\n  height: 0.5rem;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-reset:hover img {\\r\\n  transform: scale(1.2);\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PHN2ZwogICB3aWR0aD0iOSIKICAgaGVpZ2h0PSI4IgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxwYXRoCiAgICAgZmlsbD0ibm9uZSIKICAgICBzdHJva2U9IiM0Qzk3RkYiCiAgICAgc3Ryb2tlLXdpZHRoPSIyIgogICAgIGQ9Ik0gMSw3LjMzMyA3LjMzMywxIE0gMSwxIDcuMzMzLDcuMzMzIgogICAgIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIKICAgICBzdHJva2UtbGluZWpvaW49InJvdW5kIgogICAgIGlkPSJwYXRoMSIKICAgICBzdHlsZT0ic3Ryb2tlOiM1NzVlNzU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg==\"","export default \"data:image/svg+xml;base64,PHN2ZwogICB3aWR0aD0iMjAiCiAgIGhlaWdodD0iMjAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHBhdGgKICAgICBmaWxsPSIjODU1Q0Q2IgogICAgIGZpbGwtcnVsZT0iZXZlbm9kZCIKICAgICBkPSJtIDkuMDksNS4yODIgYSAzLjgxNiwzLjgxNiAwIDAgMSAzLjgwNCwzLjgwNiBjIDAsMi4xIC0xLjcyLDMuODA1IC0zLjgwNSwzLjgwNSBBIDMuODA3LDMuODA3IDAgMCAxIDUuMjg0LDkuMDg4IGMgMCwtMi4xIDEuNzA1LC0zLjgwNiAzLjgwNSwtMy44MDYgbSA3LjU3OSw5Ljc3MiAtMi4xMjIsLTIuMTIzIGMgLTAuMjQ1LC0wLjI0NiAtMC4yNzksLTAuNjIgLTAuMTExLC0wLjkyNSAwLjg1MiwtMS41NzkgMS4wNiwtMy41OTMgMC4xNDQsLTUuNTY4IGEgNS45NDksNS45NDkgMCAwIDAgLTMuODY3LC0zLjIyOSA2LjEwNCw2LjEwNCAwIDAgMCAtNy42MSw3LjAxNyBjIDAuNDAzLDIuMjIzIDIuMTAxLDQuMDkzIDQuMjczLDQuNzA4IGEgNi4wOCw2LjA4IDAgMCAwIDQuNjE3LC0wLjUgMC43NzgsMC43NzggMCAwIDEgMC45MjgsMC4xMSBsIDIuMTM2LDIuMTI0IGMgMC4yMTMsMC4yMjggMC41MDIsMC4zMzUgMC44MDcsMC4zMzUgMC4yODksMCAwLjU3OCwtMC4xMDcgMC44MDUsLTAuMzM1IGEgMS4xNDYsMS4xNDYgMCAwIDAgMCwtMS42MTQiCiAgICAgaWQ9InBhdGgxIgogICAgIHN0eWxlPSJmaWxsOiM1NzVlNzU7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPgo=\"","/* generated by pull.js */\r\nimport _js from \"./userscript.js\";\r\nimport _css from \"!css-loader!./search-bar.css\";\r\nimport _asset from \"!url-loader!./reset-icon.svg\";\r\nimport _asset2 from \"!url-loader!./search-icon.svg\";\r\nexport const resources = {\r\n  \"userscript.js\": _js,\r\n  \"search-bar.css\": _css,\r\n  \"reset-icon.svg\": _asset,\r\n  \"search-icon.svg\": _asset2,\r\n};\r\n","export default async function ({ addon, console, msg }) {\r\n  let spritesContainer;\r\n  let spriteSelectorContainer;\r\n\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"sa-search-sprites-container sa-search-sprites-empty\";\r\n  addon.tab.displayNoneWhileDisabled(container);\r\n\r\n  const searchBox = document.createElement(\"input\");\r\n  searchBox.className = \"sa-search-sprites-box\";\r\n  searchBox.placeholder = msg(\"placeholder\");\r\n  searchBox.autocomplete = \"off\";\r\n  // search might make more sense, but browsers treat them special in ways that this addon does not handle,\r\n  // so just leave it as a text input. Also note that Scratch uses type=text for its own search inputs in\r\n  // the libraries, so this fits right in.\r\n  searchBox.type = \"text\";\r\n\r\n  const search = (query) => {\r\n    if (!spritesContainer) return;\r\n\r\n    query = query.toLowerCase();\r\n    const containsQuery = (str) => str.toLowerCase().includes(query);\r\n\r\n    for (const sprite of spritesContainer.children) {\r\n      const visible =\r\n        !query ||\r\n        containsQuery(sprite.children[0].children[1].innerText) ||\r\n        (containsQuery(sprite.children[0].children[2].children[0].innerText) &&\r\n          sprite.children[0].classList.contains(\"sa-folders-folder\"));\r\n      sprite.style.display = visible ? \"\" : \"none\";\r\n    }\r\n  };\r\n\r\n  searchBox.addEventListener(\"input\", (e) => {\r\n    container.classList.toggle(\"sa-search-sprites-empty\", !e.target.value);\r\n    search(e.target.value);\r\n  });\r\n\r\n  const searchIcon = document.createElement(\"img\");\r\n  searchIcon.className = \"sa-search-sprites-icon\";\r\n  searchIcon.src = addon.self.getResource(\"/search-icon.svg\") /* rewritten by pull.js */;\r\n  searchIcon.alt = \"\";\r\n  searchIcon.draggable = false;\r\n\r\n  const reset = () => {\r\n    search(\"\");\r\n    searchBox.value = \"\";\r\n    container.classList.add(\"sa-search-sprites-empty\");\r\n  };\r\n\r\n  const resetButton = document.createElement(\"button\");\r\n  resetButton.className = \"sa-search-sprites-reset\";\r\n  resetButton.addEventListener(\"click\", () => {\r\n    reset();\r\n    searchBox.focus();\r\n  });\r\n  addon.self.addEventListener(\"disabled\", reset);\r\n\r\n  const resetIcon = document.createElement(\"img\");\r\n  resetIcon.src = addon.self.getResource(\"/reset-icon.svg\") /* rewritten by pull.js */;\r\n  resetIcon.alt = msg(\"clear\");\r\n  resetIcon.draggable = false;\r\n  resetButton.appendChild(resetIcon);\r\n\r\n  container.appendChild(searchBox);\r\n  container.appendChild(searchIcon);\r\n  container.appendChild(resetButton);\r\n\r\n  while (true) {\r\n    await addon.tab.waitForElement(\"div[class^='sprite-selector_items-wrapper']\", {\r\n      markAsSeen: true,\r\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\r\n      reduxCondition: (state) => !state.scratchGui.mode.isPlayerOnly,\r\n    });\r\n\r\n    spritesContainer = document.querySelector('[class^=\"sprite-selector_items-wrapper\"]');\r\n    spriteSelectorContainer = document.querySelector('[class^=\"sprite-selector_sprite-selector\"]');\r\n    const addButton = document.querySelector('[class*=\"sprite-selector_add-button\"]');\r\n    spriteSelectorContainer.insertBefore(container, addButton);\r\n    reset(); // Clear search box after going outside then inside\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;ACAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}